# アーキテクチャ概要

このドキュメントでは、スマートフォン向け MMD 互換ダンス動画アプリの設計をまとめます。アプリには OpenTK を用いた純粋 C# 実装のビューワーが同梱されます。

## 目標

- VRM・FBX・PMX 形式の 3D キャラクターモデルを読み込む
- ユーザー提供の動画から姿勢推定を行いダンスモーションを抽出する
- 生成したモーションをカスタムビューワー上でモデルに適用する
- 端末の動きと連動した仮想カメラで録画する

## コンポーネント

1. **モデル読み込み**
   - 実行時に VRM パーサーでモデルをロード
   - FBX/PMX は事前変換もしくは将来のインポータ対応を想定
2. **姿勢推定**
   - MediaPipe Pose を ONNX Runtime で実行
   - 動画から関節軌跡を生成
3. **モーション生成**
   - JointData をアニメーションフレームへ変換しモデルに適用
4. **カメラ制御**
   - ジャイロや AR トラッキング情報を読み取りカメラを移動
5. **録画**
   - 描画フレームをプラットフォーム API で動画にエンコード
6. **UI システム**
   - JSON で定義したレイアウトをスクリプトで生成

## フォルダ構成

```text
PureViewer/
  Viewer/        - OpenTK ビューワーのソースコード
  Assets/        - サンプルモデル
docs/            - 各種ドキュメント
```

### なぜフォルダを明示するのか

ディレクトリ構成を記載しておくことで、新しいファイルの配置場所が明確になり、貢献者や LLM ツールが適切な場所にコードを生成できます。

- **PureViewer** – スタンドアロンの OpenTK アプリとサンプルアセット
- **docs** – 設計資料やガイドを配置

この構造を文書化しておくことで、プロジェクト全体の理解が容易になり、コードベースの一貫性を保ちやすくなります。
